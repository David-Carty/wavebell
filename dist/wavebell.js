!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.t=n():"function"==typeof define&&define.n?define(n):t.e=n()}(this,function(){"use strict";function t(t){return new c(t)}function n(t){if("string"!=typeof t)throw new TypeError(t+" is not a string");return new w(t)}function e(){return function(t){if(n("navigator.mediaDevices.getUserMedia").i(window))return n("navigator.mediaDevices").from(window).r(t);var e=navigator.r||navigator.u||navigator.o||navigator.s;if(!e)throw new Error("getUserMedia is not supported by this browser");return new Promise(function(n,i){e(t,n,i)})}({f:!0,c:!1})}function i(t,n){return new Error("Failed to execute '"+n+"' on 'Recorder':\nThe Recorder's state is '"+t.a+"'.")}!function(){function t(t){this.h=t}function n(n){function e(r,u){try{var o=n[r](u),s=o.h;s instanceof t?Promise.v(s.h).l(function(t){e("next",t)},function(t){e("throw",t)}):i(o.y?"return":"normal",o.h)}catch(t){i("throw",t)}}function i(t,n){switch(t){case"return":r.v({h:n,y:!0});break;case"throw":r.w(n);break;default:r.v({h:n,y:!1})}(r=r.d)?e(r.p,r.k):u=null}var r,u;this.b=function(t,n){return new Promise(function(i,o){var s={p:t,k:n,v:i,w:o,d:null};u?u=u.d=s:(r=u=s,e(t,n))})},"function"!=typeof n.g&&(this.g=void 0)}"function"==typeof Symbol&&Symbol.m&&(n.prototype[Symbol.m]=function(){return this}),n.prototype.d=function(t){return this.b("next",t)},n.prototype.j=function(t){return this.b("throw",t)},n.prototype.g=function(t){return this.b("return",t)}}();var r=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.O=i.O||!1,i.T=!0,"value"in i&&(i.x=!0),Object.defineProperty(t,i.p,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),o=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{h:t,O:!1,x:!0,T:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},s=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},f=function(){function t(){r(this,t),this.S={}}return u(t,[{p:"on",h:function(t,n){if("string"!=typeof t)throw new TypeError(t+" is not a string");if("function"!=typeof n)throw new TypeError(n+" is not a function");var e=this.S,i=e[t]=e[t]||[];return-1===i.indexOf(n)&&i.push(n),this}},{p:"off",h:function(t,n){if(void 0===n)return delete this.S[t],this;var e=this.S[t];if(e){var i=e.indexOf(n);i>=0&&e.splice(i,1),0===e.length&&this.A(t)}return this}},{p:"emit",h:function(t){var n=function(t,n){return Array.prototype.slice.call(t,n)}(arguments,1),e=this.S[t];if(e)for(var i=0,r=e.length;i<r;i++)e[i].apply(void 0,n);return this}}]),t}(),c=function(){function t(n){r(this,t),this.h=n,this.B=!1,this.P=new Error("Assertion failed")}return u(t,[{p:"that",h:function(t){return this.P=t,this}},{p:"equal",h:function(t){if(t===this.h===this.B)throw this.P}},{p:"to",R:function(){return this}},{p:"not",R:function(){return this.B=!this.B,this}}]),t}(),a=window.D||window.M,h=null,l=function(){function t(){r(this,t)}return u(t,[{p:"context",R:function(){return h||(h=new a),h}}]),t}(),v=function(t){function n(t,e){r(this,n);var i=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i.U=t,i.C=e||{_:2048,q:.3},i.source=null,i.z=i.F(i.C),i}return o(n,l),u(n,[{p:"init",h:function(t){var n=this,e=this.G.V();e._=t._,e.q=t.q;var i=this.G.H(0,1,1);return i.I=function(t){"recording"===n.U.a&&n.J(t)},e.K(i),i.K(this.G.L),e}},{p:"pipe",h:function(t){this.source=this.G.N(t),this.source.K(this.z)}},{p:"cutoff",h:function(){this.source.Q(this.z),this.source=null}},{p:"_processData",h:function(t){var n=new Uint8Array(this.z.W);this.z.X(n);var e=this.Y(n);this.U.Z("wave",{h:e})}},{p:"_calcAvgVolume",h:function(t){for(var n=0,e=t.length,i=0;i<e;i++)n+=t[i];return n/e}}]),n}(),y=Object.prototype.hasOwnProperty,w=function(){function t(n){r(this,t),this.$=n.split("."),this.tt=void 0}return u(t,[{p:"travel",h:function(t,n){if("function"!=typeof n)throw new TypeError(n+" is not a function");for(var e=this.$.length,i=0,r=this.$[i];n(t,r)&&i<e;)t=t[r],r=this.$[++i];return{nt:i,h:t}}},{p:"or",h:function(t){return this.tt=t,this}},{p:"from",h:function(t){var n=this.et(t,function(t,n){return null!=t&&n in Object(t)});return n.nt===this.$.length?n.h:this.tt}},{p:"hadBy",h:function(t){return this.et(t,function(t,n){return null!=t&&n in Object(t)}).nt===this.$.length}},{p:"ownedBy",h:function(t){return this.et(t,function(t,n){return null!=t&&y.call(t,n)}).nt===this.$.length}}]),t}(),d=function(n){function c(t){r(this,c);var n=s(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return n.C=t||{it:"audio/webm",rt:96e3},n.ut=null,n.ot=null,n.st=new v(n),n}return o(c,f),u(c,[{p:"open",h:function(){var t=this;return e().l(function(n){t.ut=new MediaRecorder(n,t.C);["error","pause","resume","start","stop"].map(function(n){t.ut.ft(n,function(e){return t.Z(n,e)})}),t.ut.ft("dataavailable",function(n){t.ot.push(n.ct)}),t.st.at(n)})}},{p:"close",h:function(){this.st.ht(),this.ut=null,this.ot=null}},{p:"start",h:function(n){var e=this;t(this.a).yt(i(this,"start")).vt.lt("inactive"),this.ot=[],this.wt?this.ut.dt(n):this.pt().l(function(){e.ut.dt(n)})}},{p:"stop",h:function(){t(this.a).yt(i(this,"stop")).vt.kt.lt("inactive"),this.ut.bt()}},{p:"pause",h:function(){t(this.a).yt(i(this,"pause")).vt.lt("recording"),this.ut.gt()}},{p:"resume",h:function(){t(this.a).yt(i(this,"resume")).vt.lt("paused"),this.ut.mt()}},{p:"state",R:function(){return null===this.ut?"inactive":this.ut.a}},{p:"ready",R:function(){return null!==this.ut}},{p:"result",R:function(){return new Blob(this.ot,{jt:this.ut.it})}}]),c}();return function(t){function n(){return r(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,d),n}()});
//# sourceMappingURL=wavebell.js.map
